Let's try observation space like this now:
Use CNN with PPO!
NxN matrices for each feature

Give minus reward for a bad move


What features to choose (NxN feature maps):
    1) isEnemyBuilding
    3) isEnemyTroop
    2) Health
    3) Power
    4) canMove
    5) Unit to move




POWER IS DECREASED FOR MISSING HEALTH AND THERE ARE OTHER DEBUFFS..
MAKE VARIABLES WITH DEBUFFS AND WHEN THEY DISAPPEAR
Do I have to make the human be able to make moves?

When attacking the player can only move there if the unit is killed, otherwise stay in the same place 
Also if attacking from 2 tiles we should move the player one tile closer and only then attack, might be a little difficult to make
Or just w

Finish the game when all the troops die? sure

If you stay in the same place, remove all movement.
Otherwise remove movement however much you moved.

AI just walked through the city, get_reachable_pos doesn't work correctly

I want to already mask what is possible and what is not (not allow to make invalid moves)

no masking ,just return a large negative reward if invalid action 


I will have discrete grid and then mask it, then choose a random action from all available actions left
Stable basline has Maskable PPO!!!!!!!

Don't care about the AI for now and his actions, just focus on the player and him doing the right actions

RIGHT NOW IMPLEMENT A MASK!!!!! it should be implemented in the environment as a helper function or something

How do I know for which troop should I make the mask?

I need to move the closest troop that is to the position that the AI wants to move to.

a lot of the functions should be made private because they are not meant to be called externally, i guess.

Need a fortify defense bonus

City centers also should be able to attack

Diminish damage for damage units

MAKE MY OWN CNN WITH MASK

Check reward scale so that they are similar to discount rate?




New blabla mask does not match the size of actual tensor, try to figure it out